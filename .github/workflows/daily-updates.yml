# https://github.com/jasonetco/jasonetco/blob/master/.github/workflows/daily-updates.yml
# const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']

name: Daily Updates

on:
  schedule:
    # - cron: 55 5 * * * # â€œAt every 05:55.â€
    - cron: "*/15 * * * *" # â€œAt every 15th minute.â€
  push:
    branches:
      - master

jobs:
  updates:
    name: Update README
    runs-on: ubuntu-latest
    steps:
      # - name: Update README Step
      #   uses: JasonEtco/rss-to-readme@v1
      #   with:
      #     feed-url: https://jasonet.co/rss.xml
      #     readme-section: posts
      #     empty-commits: "false"
      - name: View Context Attributes
        uses: actions/github-script@v6
        with:
          script: console.log(context)
      - name: GitHub Script
        uses: actions/github-script@v5
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const query = `mutation changeUserStatus ($input: ChangeUserStatusInput!) {
              changeUserStatus (input: $input) {
                status {
                  emoji
                  message
                }
              }
            }`

            const days = ['Ù©(â—•â€¿â—•)Û¶', 'ï¼¼(ã€‡_ï½)ï¼', 'Ù©(Ã— Ã—)Û¶', '(á—’á—£á—•)Õ', 'Ê• â€¢á´¥â€¢ Ê”', 'ãƒ½(â™¡â€¿â™¡)ãƒ', 'â˜†*:.ï½¡.o(â‰§â–½â‰¦)o.ï½¡.:*â˜†']
            const emojis = ['ğŸ˜Š', 'ğŸ¥º', 'ğŸ¤”', 'ğŸ˜£', 'ğŸ»', 'ğŸ˜', 'ğŸ¥°']
            const dayIndex = (new Date()).getDay()

            github.graphql(query, {
              input: {
                emoji: `${emojis[dayIndex]}`,
                message: `Happy ${days[dayIndex]}!`
              }
            })
